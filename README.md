# 分摊算法
```
按照价值比例均摊（即按占比分摊）,最后一个用减法

分摊顺序（也就是说抵扣顺序，抵扣优先级）：
    1.营销活动
    2.优惠券：抵扣适用的商品
    3.德分
    4.积分
    5.礼金卡（礼品卡）： 可抵扣适用的商品，抵扣适用商品的运费
    6.支付方式：使用第三方人民币支付

```

## 分摊类型
```
运费分摊：把运费分摊给需要运费的商品上
优惠券分摊：把优惠券金额分摊给适用的商品上
积分分摊：积分抵扣分摊
德分分摊：德分抵扣分摊
金币分摊：金币抵扣分摊
支付金额分摊：把实际支付的人民币分摊到购买的商品上
促销活动分摊： 
    满减（满件减、满元减）：把优惠的金额分摊到活动优惠的商品上
    满折（满件折、满元折）：把打折优惠的金额分摊到活动优惠的商品上
    满赠（满件赠、满元赠）：赠品不分摊，退主品时同时把赠品退回

礼金卡（礼品卡）分摊： 把消耗礼金卡的金额分摊到适用的商品和适用商品的运费上，礼金卡优先抵扣运费再抵扣商品

```

## 示例
```


```

